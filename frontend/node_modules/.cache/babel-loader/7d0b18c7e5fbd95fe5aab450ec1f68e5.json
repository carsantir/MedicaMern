{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\carsa\\\\Desktop\\\\pruebaUsuarios\\\\frontend\\\\src\\\\components\\\\consultas\\\\EditarConsulta.jsx\";\nimport React, { Component, useContext, useEffect } from 'react';\nimport api from '../../api';\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport UserContext from \"../../context/userContext\";\nimport { useOktaAuth } from \"@okta/okta-react\";\nimport firebase from \"firebase/app\";\nimport moment from 'moment';\nimport \"firebase/auth\";\nimport Select from 'react-select';\nimport Async from 'react-async';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Title = styled.h1.attrs({\n  className: 'h1'\n})``;\n_c = Title;\nconst Wrapper = styled.div.attrs({\n  className: 'form-group'\n})`\n    margin: 0 30px;\n`;\n_c2 = Wrapper;\nconst Label = styled.label`\n    margin: 5px;\n`;\n_c3 = Label;\nconst InputText = styled.input.attrs({\n  className: 'form-control'\n})`\n    margin: 5px;\n`;\nconst Button = styled.button.attrs({\n  className: `btn btn-primary`\n})`\n    margin: 15px 15px 15px 5px;\n`;\n_c4 = Button;\nconst CancelButton = styled.a.attrs({\n  className: `btn btn-danger`\n})`\n    margin: 15px 15px 15px 5px;\n`;\n_c5 = CancelButton;\n\nclass EditarConsulta extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = async selectedOption => {\n      console.log(`Option selected:`, selectedOption);\n      const medico = selectedOption.val;\n      this.setState({\n        medico\n      });\n    };\n\n    this.handleUpdateConsulta = async () => {\n      const {\n        id,\n        medico\n      } = this.state;\n      const payload = {\n        medico\n      };\n      await api.editarConsulta(id, payload).then(res => {\n        console.log(`Consulta updated successfully`);\n        this.setState({\n          medico: ''\n        });\n        this.props.history.push('/');\n      });\n    };\n\n    this.componentWillMount = async () => {\n      const {\n        id\n      } = this.state;\n      const {\n        idUser\n      } = this.state;\n      console.log(idUser);\n      const consulta = await api.getConsultaById(id);\n\n      if (idUser != consulta.data.data.medico) {\n        this.props.history.push('/error');\n      }\n\n      this.setState({\n        medico: consulta.data.data.medico\n      });\n    };\n\n    this.state = {\n      id: this.props.match.params.id,\n      // idUser: this.props.match.params.idUser,\n      idUser: this.props.userData.id,\n      medico: ''\n    };\n  } // handleChangeInputMedico = async event => {\n  //     const motivo = event.target.validity.valid\n  //         ? event.target.value\n  //         : this.state.motivo\n  //     this.setState({ motivo })\n  // }\n\n\n  render() {\n    const {\n      medico,\n      id\n    } = this.state;\n\n    const sacaMedicos = () => api.getMedics().then(res => {\n      return res;\n    });\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: /*#__PURE__*/_jsxDEV(Wrapper, {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          class: \"loginh2\",\n          children: \"Editar consulta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"input\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"inputBox\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"M\\xE9dico: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Async, {\n              promiseFn: sacaMedicos,\n              children: ({\n                data,\n                err\n              }) => {\n                if (err) return `Something went wrong: ${err.message}`;\n\n                if (data) {\n                  const selectMedico = [];\n                  data.data.data.map(medico => {\n                    selectMedico.push({\n                      desc: medico.nombre + \" \" + medico.apellidos + \"-\" + medico.sector,\n                      val: medico._id\n                    });\n                  });\n                  return /*#__PURE__*/_jsxDEV(Select, {\n                    options: selectMedico,\n                    getOptionLabel: option => option.desc,\n                    getOptionValue: option => option.val,\n                    id: \"selectMedico\",\n                    placeholder: \"Selecciona un medico\",\n                    onChange: this.onChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 33\n                  }, this);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"inputBox\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: this.handleUpdateConsulta,\n              children: \"Editar consulta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"inputBox\",\n            children: /*#__PURE__*/_jsxDEV(CancelButton, {\n              href: id + '/consultas',\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default EditarConsulta;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Title\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"Label\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"CancelButton\");","map":{"version":3,"sources":["C:/Users/carsa/Desktop/pruebaUsuarios/frontend/src/components/consultas/EditarConsulta.jsx"],"names":["React","Component","useContext","useEffect","api","useHistory","Redirect","UserContext","useOktaAuth","firebase","moment","Select","Async","styled","Title","h1","attrs","className","Wrapper","div","Label","label","InputText","input","Button","button","CancelButton","a","EditarConsulta","constructor","props","onChange","selectedOption","console","log","medico","val","setState","handleUpdateConsulta","id","state","payload","editarConsulta","then","res","history","push","componentWillMount","idUser","consulta","getConsultaById","data","match","params","userData","render","sacaMedicos","getMedics","err","message","selectMedico","map","desc","nombre","apellidos","sector","_id","option"],"mappings":"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","sourcesContent":["import React, { Component,useContext,useEffect } from 'react'\r\nimport api from '../../api'\r\nimport { useHistory,Redirect } from \"react-router-dom\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport { useOktaAuth } from \"@okta/okta-react\";\r\nimport firebase from \"firebase/app\";\r\nimport moment from 'moment';\r\nimport \"firebase/auth\";\r\nimport Select from 'react-select';\r\nimport Async from 'react-async';\r\n\r\nimport styled from 'styled-components'\r\n\r\nconst Title = styled.h1.attrs({\r\n    className: 'h1',\r\n})``\r\n\r\nconst Wrapper = styled.div.attrs({\r\n    className: 'form-group',\r\n})`\r\n    margin: 0 30px;\r\n`\r\n\r\nconst Label = styled.label`\r\n    margin: 5px;\r\n`\r\n\r\nconst InputText = styled.input.attrs({\r\n    className: 'form-control',\r\n})`\r\n    margin: 5px;\r\n`\r\n\r\nconst Button = styled.button.attrs({\r\n    className: `btn btn-primary`,\r\n})`\r\n    margin: 15px 15px 15px 5px;\r\n`\r\n\r\nconst CancelButton = styled.a.attrs({\r\n    className: `btn btn-danger`,\r\n})`\r\n    margin: 15px 15px 15px 5px;\r\n`\r\n\r\nclass EditarConsulta extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            id: this.props.match.params.id,\r\n            // idUser: this.props.match.params.idUser,\r\n            idUser: this.props.userData.id,\r\n            medico:'',\r\n        }\r\n    }\r\n\r\n\r\n    // handleChangeInputMedico = async event => {\r\n    //     const motivo = event.target.validity.valid\r\n    //         ? event.target.value\r\n    //         : this.state.motivo\r\n\r\n    //     this.setState({ motivo })\r\n    // }\r\n\r\n    onChange = async (selectedOption) => {\r\n\r\n        console.log(`Option selected:`, selectedOption);\r\n        const medico=(selectedOption.val);\r\n        this.setState({ medico })\r\n      };\r\n\r\n\r\n    handleUpdateConsulta = async () => {\r\n        const { id, medico } = this.state\r\n        const payload = { medico }\r\n\r\n        await api.editarConsulta(id, payload).then(res => {\r\n           console.log(`Consulta updated successfully`)\r\n            this.setState({\r\n                medico: '',\r\n            })\r\n            this.props.history.push('/');\r\n        })\r\n    }\r\n\r\n\r\n    componentWillMount = async () => {\r\n        const { id } = this.state\r\n        const {idUser} =this.state\r\n        console.log(idUser)\r\n        const consulta = await api.getConsultaById(id)\r\n        if(idUser != consulta.data.data.medico){\r\n            this.props.history.push('/error');\r\n        }\r\n        this.setState({\r\n            medico: consulta.data.data.medico,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { medico,id } = this.state\r\n        const sacaMedicos = () =>\r\n        api.getMedics()\r\n        .then(res => {return res})\r\n        return (\r\n            <div className=\"form\">\r\n            <Wrapper>\r\n                <Title class=\"loginh2\">Editar consulta</Title>\r\n                <div class=\"input\">\r\n                <div class=\"inputBox\">\r\n                <Label>Médico: </Label>\r\n                <Async promiseFn={sacaMedicos}>\r\n\r\n                {({ data, err }) => {\r\n                        if (err) return `Something went wrong: ${err.message}`\r\n\r\n                        if (data){\r\n\r\n                            const selectMedico = [];\r\n                            data.data.data.map((medico) => { selectMedico.push({ desc:medico.nombre+\" \"+medico.apellidos+\"-\"+medico.sector, val: medico._id  })});\r\n\r\n                            return (\r\n                                <Select\r\n                                options={selectMedico} getOptionLabel={(option)=>option.desc}\r\n                                getOptionValue={(option)=>option.val } id=\"selectMedico\" placeholder=\"Selecciona un medico\" onChange={this.onChange} ></Select>\r\n                                \r\n                            )}\r\n                        }}\r\n                </Async>\r\n                </div>\r\n                <div class=\"inputBox\">\r\n                <Button onClick={this.handleUpdateConsulta}>Editar consulta</Button>\r\n                </div>\r\n                <div class=\"inputBox\">\r\n                <CancelButton href={id+'/consultas'}>Cancelar</CancelButton>\r\n                </div>\r\n                </div>\r\n            </Wrapper>\r\n            </div>\r\n        )\r\n}\r\n}\r\n\r\nexport default EditarConsulta"]},"metadata":{},"sourceType":"module"}