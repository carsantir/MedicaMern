{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\carsa\\\\Desktop\\\\pruebaUsuarios\\\\frontend\\\\src\\\\components\\\\consultas\\\\CrearConsulta.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\nimport UserContext from \"../../context/userContext\";\nimport Select from 'react-select';\nimport Async from 'react-async';\nimport api from '../../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CrearConsulta() {\n  _s();\n\n  const [fecha, setFecha] = useState();\n  const [motivo, setMotivo] = useState();\n  const [descripcion, setDescripcion] = useState();\n  const {\n    userData\n  } = useContext(UserContext);\n  const [paciente] = userData.user.id;\n  const [medico, setMedico] = useState();\n  const [error, setError] = useState();\n  const history = useHistory();\n\n  const onChange = async selectedOption => {\n    console.log(`Option selected:`, selectedOption);\n    setMedico(selectedOption.val);\n  };\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      const newUser = {\n        fecha,\n        motivo,\n        descripcion,\n        paciente,\n        medico\n      };\n      await axios.post(\"http://localhost:5000/enquiries/add\", newUser);\n      history.push(\"/consultas\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  const sacaMedicos = () => api.getMedics().then(res => {\n    return res;\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"crearQuedada\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Crear consulta\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }, this), error && /*#__PURE__*/_jsxDEV(ErrorNotice, {\n      message: error,\n      clearError: () => setError(undefined)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Fecha: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        id: \"fecha\",\n        onChange: e => setFecha(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 77\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Motivo: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"motivo\",\n        onChange: e => setMotivo(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 79\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Descripci\\xF3n: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"descripcion\",\n        onChange: e => setDescripcion(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 89\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"M\\xE9dico \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(Async, {\n        promiseFn: sacaMedicos,\n        children: ({\n          data,\n          err,\n          isLoading\n        }) => {\n          if (isLoading) return \"Loading...\";\n          if (err) return `Something went wrong: ${err.message}`;\n\n          if (data) {\n            const selectmedico = [];\n            const medicoprueba = data.data.data[0];\n            const nombre = medicoprueba.nombre;\n            data.data.data.map(medico => {\n              selectmedico.push({\n                desc: medico.nombre + \" \" + medico.apellidos,\n                val: medico._id\n              });\n            });\n            /*\r\n                        for (pacient in data.data.data){\r\n                            selectpacient.push({ label:pacient.name, value: pacient.id  })\r\n                        }*/\n\n            const content = data.data.data.map(medico => {\n              /*#__PURE__*/\n              _jsxDEV(\"option\", {\n                id: \"medico\",\n                value: medico.id,\n                children: [medico.nombre, \" \", medico.apellidos]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 17\n              }, this);\n            });\n            return (\n              /*#__PURE__*/\n\n              /*\r\n                              \r\n                              <select class=\"introduction\" id=\"role\" onChange={e => setPacient(e.target.value)}  >\r\n                              <option id=\"\" value=\"\">---Selecciona uno---</option>\r\n                                  \r\n                               {data.data.data.map((paciente) => {\r\n                              return (<option id=\"pacient\" value={paciente.pacient._id} >{paciente.pacient.name} {paciente.pacient.surname} </option>)     \r\n                          })}\r\n                            </select>\r\n              */\n              _jsxDEV(Select, {\n                options: selectmedico,\n                getOptionLabel: option => option.desc,\n                getOptionValue: option => option.val,\n                id: \"medico\",\n                onChange: onChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this)\n              /*      \r\n                    <Select options={selectpacient} getOptionLabel={(option)=>option.desc}\r\n                    getOptionValue={(option)=>option.val } id=\"pacient\" onChange={opt => \r\n                        setPacient(opt.val.value)} ></Select>\r\n              */\n\n              /*  <input class=\"introduction\" type=\"text\" id=\"pacient\" onChange={e => setPacient(e.target.value)} value={data.data.data[0].pacient.name}   />*/\n\n            );\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Crear\",\n        className: \"btn btn-primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CrearConsulta, \"13ZE4OlNSJXdlNKQ8O1XprJPwGk=\", false, function () {\n  return [useHistory];\n});\n\n_c = CrearConsulta;\nexport default CrearConsulta;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrearConsulta\");","map":{"version":3,"sources":["C:/Users/carsa/Desktop/pruebaUsuarios/frontend/src/components/consultas/CrearConsulta.jsx"],"names":["React","useState","useContext","useEffect","useHistory","Redirect","axios","ErrorNotice","UserContext","Select","Async","api","CrearConsulta","fecha","setFecha","motivo","setMotivo","descripcion","setDescripcion","userData","paciente","user","id","medico","setMedico","error","setError","history","onChange","selectedOption","console","log","val","submit","e","preventDefault","newUser","post","push","err","response","data","msg","sacaMedicos","getMedics","then","res","undefined","target","value","isLoading","message","selectmedico","medicoprueba","nombre","map","desc","apellidos","_id","content","option"],"mappings":"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","sourcesContent":["import React, { useState, useContext,useEffect } from 'react';\r\nimport { useHistory, Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport Select from 'react-select';\r\nimport Async from 'react-async';\r\nimport api from '../../api'\r\nfunction CrearConsulta () {\r\nconst [fecha, setFecha] = useState();\r\nconst [motivo, setMotivo] = useState();\r\nconst [descripcion, setDescripcion] = useState();\r\nconst { userData } = useContext(UserContext);\r\nconst [paciente] = userData.user.id;\r\nconst [medico, setMedico] = useState();\r\nconst [error, setError] = useState();\r\nconst history = useHistory();\r\nconst onChange = async (selectedOption) => {\r\n\r\n    console.log(`Option selected:`, selectedOption);\r\n    setMedico(selectedOption.val);\r\n    \r\n  };\r\n\r\nconst submit = async (e) => {\r\ne.preventDefault();\r\ntry{\r\nconst newUser = {fecha,motivo,descripcion,paciente,medico};\r\nawait axios.post(\"http://localhost:5000/enquiries/add\", newUser);\r\n\r\nhistory.push(\"/consultas\");\r\n} catch(err) {\r\nerr.response.data.msg && setError(err.response.data.msg)\r\n}\r\n};\r\n\r\nconst sacaMedicos = () =>\r\n    api.getMedics()\r\n    .then(res => {return res})\r\n\r\n    return (\r\n    <div className=\"crearQuedada\">\r\n    <h2>Crear consulta</h2>\r\n    {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n    <form onSubmit={submit}>\r\n    <label>Fecha: </label><br></br>\r\n    <input type=\"date\" id=\"fecha\" onChange={e => setFecha(e.target.value)}/><br></br>\r\n    <label>Motivo: </label><br></br>\r\n    <input type=\"text\" id=\"motivo\" onChange={e => setMotivo(e.target.value)}/><br></br>\r\n    <label>Descripción: </label><br></br>\r\n    <input type=\"text\" id=\"descripcion\" onChange={e => setDescripcion(e.target.value)}/><br></br>\r\n    <label>Médico </label><br></br>\r\n    <Async promiseFn={sacaMedicos}>\r\n\r\n{({ data, err, isLoading }) => {\r\n          if (isLoading) return \"Loading...\"\r\n          if (err) return `Something went wrong: ${err.message}`\r\n\r\n          if (data){\r\n\r\n            const selectmedico = [];\r\n            const medicoprueba = data.data.data[0]\r\n            const nombre = medicoprueba.nombre\r\n            data.data.data.map((medico) => { selectmedico.push({ desc:medico.nombre+\" \"+medico.apellidos, val: medico._id  })});\r\n/*\r\n            for (pacient in data.data.data){\r\n                selectpacient.push({ label:pacient.name, value: pacient.id  })\r\n            }*/\r\n\r\n            const content = data.data.data.map((medico) => {\r\n                <option id=\"medico\" value={medico.id} >{medico.nombre} {medico.apellidos}</option>     \r\n            });\r\n            \r\n            \r\n            \r\n            return (\r\n/*\r\n                \r\n                <select class=\"introduction\" id=\"role\" onChange={e => setPacient(e.target.value)}  >\r\n                <option id=\"\" value=\"\">---Selecciona uno---</option>\r\n                    \r\n                 {data.data.data.map((paciente) => {\r\n                return (<option id=\"pacient\" value={paciente.pacient._id} >{paciente.pacient.name} {paciente.pacient.surname} </option>)     \r\n            })}\r\n              </select>\r\n*/\r\n                <Select options={selectmedico} getOptionLabel={(option)=>option.desc}\r\n                getOptionValue={(option)=>option.val } id=\"medico\"  onChange={onChange} ></Select>\r\n          /*      \r\n                <Select options={selectpacient} getOptionLabel={(option)=>option.desc}\r\n                getOptionValue={(option)=>option.val } id=\"pacient\" onChange={opt => \r\n                    setPacient(opt.val.value)} ></Select>\r\n          */\r\n                /*  <input class=\"introduction\" type=\"text\" id=\"pacient\" onChange={e => setPacient(e.target.value)} value={data.data.data[0].pacient.name}   />*/\r\n                \r\n            )}\r\n        }}\r\n</Async>\r\n    <input type=\"submit\" value=\"Crear\" className=\"btn btn-primary\" />\r\n    </form>\r\n    </div>\r\n    );\r\n}\r\nexport default CrearConsulta;"]},"metadata":{},"sourceType":"module"}